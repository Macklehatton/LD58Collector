[gd_scene load_steps=20 format=3 uid="uid://cx8vvh801ws8k"]

[ext_resource type="Script" uid="uid://ciw83583k6dr" path="res://Scripts/PlayerMovement.cs" id="1_uu6xs"]
[ext_resource type="Script" uid="uid://cjdr0uhehpij0" path="res://Inventory.cs" id="1_wkp8b"]
[ext_resource type="Script" uid="uid://brrvxwtxdvw7q" path="res://Scripts/PlayerAttack.cs" id="2_3dxm6"]
[ext_resource type="PackedScene" uid="uid://cy5bscibbfed5" path="res://Prefabs/InventoryTile.tscn" id="2_20pc6"]
[ext_resource type="Script" uid="uid://cmv5p5f4wpkl" path="res://Scripts/RandomSword.cs" id="2_cm0pq"]
[ext_resource type="Script" uid="uid://cp7pam07eek7r" path="res://Scripts/PlayerWeapon.cs" id="2_fos0i"]
[ext_resource type="Script" uid="uid://ce25jfr12pud8" path="res://Scripts/Enemy.cs" id="2_trn2v"]
[ext_resource type="FontFile" uid="uid://duxquy3sfrmv2" path="res://Jacquard12-Regular.ttf" id="3_c2ibq"]
[ext_resource type="Texture2D" uid="uid://ckpteoyej48yw" path="res://Textures/SwordTile.png" id="3_r0du0"]
[ext_resource type="Texture2D" uid="uid://dibadti14rxf5" path="res://Textures/Pawn.png" id="5_5vvyt"]
[ext_resource type="Script" uid="uid://bfnqj1owfxkse" path="res://Scripts/Trail.cs" id="6_lgr22"]
[ext_resource type="Script" uid="uid://boiqerq0c3hqi" path="res://PickupItem.cs" id="7_03owx"]
[ext_resource type="Texture2D" uid="uid://dyx7nxfobqxwu" path="res://Textures/Player.png" id="12_5vvyt"]
[ext_resource type="Texture2D" uid="uid://ci7tqr8g03d2j" path="res://Textures/Circle.png" id="13_c2ibq"]

[sub_resource type="Curve" id="Curve_trn2v"]
_data = [Vector2(0, 0.761636), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="Gradient" id="Gradient_lgr22"]
colors = PackedColorArray(1, 1, 1, 0, 1, 1, 1, 1)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_03owx"]
size = Vector2(27.2408, 114.86)

[sub_resource type="CircleShape2D" id="CircleShape2D_03owx"]
radius = 20.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_trn2v"]
size = Vector2(10.6317, 86.7207)

[node name="Root" type="Node2D"]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Inventory" type="Node" parent="CanvasLayer" node_paths=PackedStringArray("gridContainer", "weaponContainer", "playerAttack")]
script = ExtResource("1_wkp8b")
gridContainer = NodePath("../MarginContainer/GridContainer")
itemTile = ExtResource("2_20pc6")
weaponContainer = NodePath("../../Player/WeaponPointing")
playerAttack = NodePath("../../Player/PlayerAttack")

[node name="MarginContainer2" type="MarginContainer" parent="CanvasLayer"]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -176.0
offset_right = 176.0
offset_bottom = 81.0
grow_horizontal = 2
theme_override_constants/margin_top = 16

[node name="Label" type="Label" parent="CanvasLayer/MarginContainer2"]
layout_mode = 2
theme_override_fonts/font = ExtResource("3_c2ibq")
theme_override_font_sizes/font_size = 48
text = "Gathering of Blades"

[node name="MarginContainer" type="MarginContainer" parent="CanvasLayer"]
offset_left = 96.0
offset_right = 96.0
theme_override_constants/margin_left = 64
theme_override_constants/margin_top = 64
theme_override_constants/margin_right = 64
theme_override_constants/margin_bottom = 64

[node name="GridContainer" type="GridContainer" parent="CanvasLayer/MarginContainer"]
layout_direction = 2
layout_mode = 2
theme_override_constants/h_separation = 48
theme_override_constants/v_separation = 48
columns = 16

[node name="EnemyTrail" type="Line2D" parent="." node_paths=PackedStringArray("swordTip")]
position = Vector2(2, 0)
width = 50.0
width_curve = SubResource("Curve_trn2v")
gradient = SubResource("Gradient_lgr22")
joint_mode = 1
round_precision = 32
antialiased = true
script = ExtResource("6_lgr22")
swordTip = NodePath("../Player/WeaponPointing/RandomSword/SwordTip")
pointCount = 256

[node name="PlayerTrail" type="Line2D" parent="." node_paths=PackedStringArray("swordTip")]
position = Vector2(1, 0)
width = 50.0
width_curve = SubResource("Curve_trn2v")
gradient = SubResource("Gradient_lgr22")
joint_mode = 1
round_precision = 32
antialiased = true
script = ExtResource("6_lgr22")
swordTip = NodePath("../Player/WeaponPointing/RandomSword/SwordTip")
pointCount = 256

[node name="Enemy" type="Area2D" parent="." node_paths=PackedStringArray("player", "weapon") groups=["Enemy"]]
position = Vector2(110, 0)
script = ExtResource("2_trn2v")
player = NodePath("../Player")
aggroRange = 10.0
speed = 2.0
waryDistance = 150.0
weapon = NodePath("RandomSword")
strafeDistance = 2.0
strafeRate = 3.0
rotationSpeed = 0.05
respawnRadius = 400.0

[node name="CharacterSprite" type="Sprite2D" parent="Enemy"]
scale = Vector2(1.5, 1.5)
texture = ExtResource("5_5vvyt")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Enemy"]
scale = Vector2(0.25, 0.25)
polygon = PackedVector2Array(59.1, -64, -59, -64, -63.8, -59, -64, 61, -60.3, 64, 59.6, 64, 63.9, 59, 64, -61.1)

[node name="RandomSword" type="Node2D" parent="Enemy" node_paths=PackedStringArray("sprite", "swordTip", "collisionShape", "collisionArea")]
position = Vector2(15, -12)
script = ExtResource("2_cm0pq")
minLength = 1.5
maxLength = 4.0
minWidth = 0.25
maxWidth = 1.25
sprite = NodePath("SwordSprite")
swordTip = NodePath("SwordTip")
collisionShape = NodePath("Area2D/CollisionShape2D")
collisionArea = NodePath("Area2D")

[node name="SwordSprite" type="Sprite2D" parent="Enemy/RandomSword"]
z_index = -1
scale = Vector2(0.851273, 3.58938)
texture = ExtResource("3_r0du0")
offset = Vector2(0, -16)

[node name="SwordTip" type="Node2D" parent="Enemy/RandomSword"]
position = Vector2(0, -114.86)

[node name="Area2D" type="Area2D" parent="Enemy/RandomSword"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Enemy/RandomSword/Area2D"]
position = Vector2(0, -57.4301)
shape = SubResource("RectangleShape2D_03owx")

[node name="Player" type="CharacterBody2D" parent="."]
script = ExtResource("1_uu6xs")
speed = 225.0

[node name="Camera2D" type="Camera2D" parent="Player"]

[node name="PickupArea" type="Area2D" parent="Player"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player/PickupArea"]
shape = SubResource("CircleShape2D_03owx")

[node name="Pickup" type="Node2D" parent="Player" node_paths=PackedStringArray("pickupArea", "inventory")]
script = ExtResource("7_03owx")
pickupArea = NodePath("../PickupArea")
pickupGroup = "Pickup"
inventory = NodePath("../../CanvasLayer/Inventory")

[node name="PlayerAttack" type="Node2D" parent="Player" node_paths=PackedStringArray("weaponObject", "weaponArea", "trail")]
script = ExtResource("2_3dxm6")
weaponObject = NodePath("../WeaponPointing/RandomSword")
weaponArea = NodePath("../WeaponPointing/RandomSword/Area2D")
trail = NodePath("../../PlayerTrail")
swingTime = 0.4
swingAngle = 1.5
targetGroup = "Enemy"

[node name="WeaponPointing" type="Node2D" parent="Player"]
position = Vector2(15, -12)
script = ExtResource("2_fos0i")

[node name="RandomSword" type="Node2D" parent="Player/WeaponPointing" node_paths=PackedStringArray("sprite", "swordTip", "collisionShape", "collisionArea")]
script = ExtResource("2_cm0pq")
minLength = 1.5
maxLength = 4.0
minWidth = 0.25
maxWidth = 1.25
sprite = NodePath("SwordSprite")
swordTip = NodePath("SwordTip")
collisionShape = NodePath("Area2D/CollisionShape2D")
collisionArea = NodePath("Area2D")

[node name="SwordSprite" type="Sprite2D" parent="Player/WeaponPointing/RandomSword"]
z_index = -1
scale = Vector2(0.33224, 2.71002)
texture = ExtResource("3_r0du0")
offset = Vector2(0, -16)

[node name="SwordTip" type="Node2D" parent="Player/WeaponPointing/RandomSword"]
position = Vector2(0, -86.7207)

[node name="Area2D" type="Area2D" parent="Player/WeaponPointing/RandomSword"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player/WeaponPointing/RandomSword/Area2D"]
position = Vector2(0, -43.3604)
shape = SubResource("RectangleShape2D_trn2v")

[node name="CharacterSprite" type="Sprite2D" parent="Player"]
scale = Vector2(1.5, 1.5)
texture = ExtResource("12_5vvyt")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Player"]
scale = Vector2(0.25, 0.25)
polygon = PackedVector2Array(59.1, -64, -59, -64, -63.8, -59, -64, 61, -60.3, 64, 59.6, 64, 63.9, 59, 64, -61.1)

[node name="Circle" type="Sprite2D" parent="."]
modulate = Color(1, 1, 1, 0.694118)
z_index = -4
texture_filter = 1
scale = Vector2(4, 4)
texture = ExtResource("13_c2ibq")
